{
  "name": "MemberVoiceUpdate",
  "temp": "prior",
  "event-type": "22",
  "_id": "JYPVw",
  "actions": [
    {
      "behavior": "1",
      "interpretation": "1",
      "code": "const newUserChannel = tempVars(\"after\")\n    .voiceChannel;\nconst oldUserChannel = tempVars(\"prior\")\n    .voiceChannel;\nconst TheUser = tempVars(\"after\");\nconst joinChannel = serverVars(\"createVoice\");\nconst parent_ID = joinChannel.parentID;\nconst server = cache.server;\nconst Vname = TheUser.displayName + \"-private\";\n\nif (newUserChannel == joinChannel) {\n    if (oldUserChannel && oldUserChannel.name == Vname) {\n        oldUserChannel.delete();\n        server.createChannel(Vname, {\n                type: 'voice',\n                parent: parent_ID\n            })\n            .then(function(channel) {\n                TheUser.setVoiceChannel(channel);\n            }.bind(this))\n            .catch(this.displayError.bind(this));\n    } else {\n        server.createChannel(Vname, {\n                type: 'voice',\n                parent: parent_ID\n            })\n            .then(function(channel) {\n                TheUser.setVoiceChannel(channel);\n            }.bind(this))\n            .catch(this.displayError.bind(this));\n    }\n} else if (oldUserChannel && oldUserChannel !== joinChannel && oldUserChannel.members.size == 0 && oldUserChannel.name == Vname) {\n    oldUserChannel.delete();\n} else if (oldUserChannel && oldUserChannel !== joinChannel && oldUserChannel.members.size == 0 && oldUserChannel.name.includes('-private')) {\n    oldUserChannel.delete();\n}",
      "storage": "0",
      "varName": "",
      "name": "Run Script"
    }
  ],
  "temp2": "after"
}